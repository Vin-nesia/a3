<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Vinnesia Analyzer - Professional website analysis tool for performance, SEO, accessibility, and technical insights. Real-time website scanning with comprehensive reports.">
    <meta name="keywords" content="website analyzer, SEO tool, performance analysis, accessibility checker, website scanner, technical analysis, web optimization">
    <meta name="author" content="Vinnesia">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Vinnesia Analyzer - Professional Website Analysis Tool">
    <meta property="og:description" content="Professional website analysis tool for performance, SEO, accessibility, and technical insights. Real-time website scanning with comprehensive reports.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://analyzer.vinnesia.my.id">
    <meta property="og:image" content="https://analyzer.vinnesia.my.id/logo.png">
    <meta property="og:site_name" content="Vinnesia Analyzer">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Vinnesia Analyzer - Professional Website Analysis Tool">
    <meta name="twitter:description" content="Professional website analysis tool for performance, SEO, accessibility, and technical insights.">
    <meta name="twitter:image" content="https://analyzer.vinnesia.my.id/logo.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Vinnesia Analyzer",
        "description": "Professional website analysis tool for performance, SEO, accessibility, and technical insights",
        "url": "https://analyzer.vinnesia.my.id",
        "applicationCategory": "WebApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <title>Vinnesia Analyzer - Real Website Analysis</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="logo.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .scanner-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .result-card {
            transition: all 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .mobile-optimized {
            max-width: 100vw;
            overflow-x: hidden;
        }
        @media (max-width: 768px) {
            .mobile-stack {
                flex-direction: column;
            }
            .mobile-text-sm {
                font-size: 0.875rem;
            }
            .mobile-p-4 {
                padding: 1rem;
            }
            .mobile-gap-4 {
                gap: 1rem;
            }
            .mobile-preview {
                width: 100% !important;
                max-width: 350px;
                margin: 0 auto;
            }
            .mobile-card {
                margin-bottom: 0.75rem;
            }
            .mobile-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .mobile-text-xs {
                font-size: 0.75rem;
            }
            .mobile-responsive-text {
                word-break: break-word;
                overflow-wrap: break-word;
            }
        }
        @media (max-width: 480px) {
            .ultra-mobile-text {
                font-size: 0.8rem;
            }
            .ultra-mobile-padding {
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen mobile-optimized">
    <!-- Header -->
    <header class="scanner-gradient shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between mobile-stack">
                <div class="flex items-center space-x-3">
                    <img src="logo.png" alt="Vinnesia Analyzer Logo" class="w-8 h-8 md:w-12 md:h-12 rounded" loading="eager">
                    <div>
                        <h1 class="text-xl md:text-3xl font-bold">Vinnesia Analyzer</h1>
                        <p class="text-xs md:text-sm opacity-80">Professional Website Analysis Tool</p>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <span class="text-sm bg-white bg-opacity-20 px-3 py-1 rounded-full">
                        Real Data Analysis
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6 md:py-8">
        <!-- Input Section -->
        <section class="bg-gray-800 rounded-xl p-4 md:p-8 shadow-xl mb-6 md:mb-8">
            <h2 class="text-lg md:text-2xl font-semibold mb-4 md:mb-6 flex items-center">
                <i class="fas fa-search mr-3 text-blue-400"></i>
                Website Analysis
            </h2>
            
            <div class="space-y-4 md:space-y-6">
                <div>
                    <label for="targetUrl" class="block text-sm font-medium mb-2">Enter Website URL</label>
                    <div class="relative">
                        <input type="url" id="targetUrl" 
                               placeholder="https://example.com" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 pl-10 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50 mobile-responsive-text"
                               autocomplete="url"
                               required
                               aria-describedby="url-help">
                        <i class="fas fa-globe absolute left-3 top-4 text-gray-400"></i>
                    </div>
                    <p id="url-help" class="text-xs text-gray-400 mt-1">Enter a valid website URL for comprehensive analysis</p>
                </div>

                <button id="startScan" class="w-full md:w-auto bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 px-6 md:px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-400 focus:ring-opacity-50">
                    <i class="fas fa-play mr-2"></i>
                    Start Analysis
                </button>

                <!-- Quick Test URLs - Mobile Optimized -->
                <div class="mt-4">
                    <p class="text-xs md:text-sm text-gray-400 mb-2">Quick Test URLs:</p>
                    <div class="grid grid-cols-2 md:flex md:flex-wrap gap-2">
                        <button onclick="quickScan('https://google.com')" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1 rounded transition-colors mobile-text-xs">
                            google.com
                        </button>
                        <button onclick="quickScan('https://github.com')" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1 rounded transition-colors mobile-text-xs">
                            github.com
                        </button>
                        <button onclick="quickScan('https://stackoverflow.com')" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1 rounded transition-colors mobile-text-xs">
                            stackoverflow.com
                        </button>
                        <button onclick="quickScan('https://mozilla.org')" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1 rounded transition-colors mobile-text-xs">
                            mozilla.org
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Progress Section -->
        <section id="progressSection" class="bg-gray-800 rounded-xl p-4 md:p-6 shadow-xl mb-6 md:mb-8 hidden">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-base md:text-lg font-semibold flex items-center">
                    <div class="loading-spinner mr-3"></div>
                    <span class="mobile-text-sm">Running Analysis...</span>
                </h3>
                <span id="progressPercent" class="text-xs md:text-sm bg-blue-600 px-2 md:px-3 py-1 rounded-full">0%</span>
            </div>
            
            <div class="bg-gray-700 rounded-full h-2 md:h-3 mb-4">
                <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 md:h-3 rounded-full progress-bar" style="width: 0%"></div>
            </div>
            
            <div id="scanStatus" class="text-xs md:text-sm text-gray-300">
                Preparing analysis...
            </div>
        </section>

        <!-- Results Dashboard -->
        <div id="resultsSection" class="hidden">
            <!-- Performance Results - Mobile Optimized -->
            <section class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 mb-6 md:mb-8">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-3 md:p-6 text-white result-card mobile-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs md:text-sm opacity-90">Load Time</p>
                            <p id="realLoadTime" class="text-lg md:text-2xl font-bold mobile-responsive-text">--</p>
                        </div>
                        <i class="fas fa-clock text-xl md:text-3xl opacity-80"></i>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-3 md:p-6 text-white result-card mobile-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs md:text-sm opacity-90">Page Size</p>
                            <p id="realPageSize" class="text-lg md:text-2xl font-bold mobile-responsive-text">--</p>
                        </div>
                        <i class="fas fa-weight-hanging text-xl md:text-3xl opacity-80"></i>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-3 md:p-6 text-white result-card mobile-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs md:text-sm opacity-90">HTTP Status</p>
                            <p id="realStatus" class="text-lg md:text-2xl font-bold mobile-responsive-text">--</p>
                        </div>
                        <i class="fas fa-server text-xl md:text-3xl opacity-80"></i>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-3 md:p-6 text-white result-card mobile-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs md:text-sm opacity-90">Resources</p>
                            <p id="realResources" class="text-lg md:text-2xl font-bold mobile-responsive-text">--</p>
                        </div>
                        <i class="fas fa-layer-group text-xl md:text-3xl opacity-80"></i>
                    </div>
                </div>
            </section>

            <!-- Website Preview - Mobile Optimized -->
            <section class="bg-gray-800 rounded-xl p-4 md:p-6 shadow-xl mb-6 md:mb-8">
                <h3 class="text-lg md:text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-eye mr-3 text-blue-400"></i>
                    <span class="mobile-text-sm">Live Website Preview</span>
                </h3>
                <div class="mobile-grid lg:grid-cols-2 gap-4 md:gap-6">
                    <div>
                        <h4 class="text-xs md:text-sm font-semibold mb-2 text-gray-300">Desktop View (1024x768)</h4>
                        <div class="bg-gray-700 rounded-lg overflow-hidden" style="height: 250px; md:height: 400px;">
                            <iframe id="desktopPreview" src="" class="w-full h-full border-0" title="Desktop Preview"></iframe>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-xs md:text-sm font-semibold mb-2 text-gray-300">Mobile View (375x667)</h4>
                        <div class="bg-gray-700 rounded-lg overflow-hidden mobile-preview" style="height: 250px; md:height: 400px;">
                            <iframe id="mobilePreview" src="" class="w-full h-full border-0" title="Mobile Preview" style="transform: scale(0.6); transform-origin: top left; width: 167%; height: 167%;"></iframe>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analysis Results - Mobile Optimized -->
            <div class="mobile-grid lg:grid-cols-2 gap-4 md:gap-8">
                <!-- Technical Details -->
                <div class="bg-gray-800 rounded-xl p-4 md:p-6 shadow-xl mobile-card">
                    <h3 class="text-lg md:text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-cog mr-3 text-yellow-400"></i>
                        <span class="mobile-text-sm">Technical Analysis</span>
                    </h3>
                    <div id="technicalResults" class="space-y-3 md:space-y-4">
                        <!-- Technical data will be shown here -->
                    </div>
                </div>

                <!-- Content Analysis -->
                <div class="bg-gray-800 rounded-xl p-4 md:p-6 shadow-xl mobile-card">
                    <h3 class="text-lg md:text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-file-alt mr-3 text-green-400"></i>
                        <span class="mobile-text-sm">Content Analysis</span>
                    </h3>
                    <div id="contentResults" class="space-y-3 md:space-y-4">
                        <!-- Content analysis will be shown here -->
                    </div>
                </div>
            </div>

            <!-- Detailed Analysis -->
            <section class="bg-gray-800 rounded-xl p-4 md:p-6 shadow-xl mt-6 md:mt-8">
                <h3 class="text-lg md:text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-microscope mr-3 text-purple-400"></i>
                    <span class="mobile-text-sm">Detailed Analysis</span>
                </h3>
                <div id="detailedResults" class="space-y-4 md:space-y-6">
                    <!-- Detailed analysis results -->
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 mt-8 md:mt-12 py-6">
        <div class="container mx-auto px-4 text-center text-gray-400">
            <p class="text-sm">&copy; 2025 Vinnesia Analyzer - Professional Website Analysis</p>
            <p class="text-xs mt-2">Real-time analysis with comprehensive insights</p>
        </div>
    </footer>

    <script>
        // Professional Website Analyzer
        class VinnesiaAnalyzer {
            constructor() {
                this.isScanning = false;
                this.startTime = 0;
                this.results = {};
            }

            async startScan(url) {
                this.isScanning = true;
                this.startTime = performance.now();
                
                const results = {
                    url: url,
                    timestamp: new Date().toISOString(),
                    realData: true,
                    analysis: {}
                };

                try {
                    await this.updateProgress(20, 'Measuring load performance...');
                    
                    // Real performance measurement
                    const loadMetrics = await this.measureRealLoadTime(url);
                    results.analysis.performance = loadMetrics;

                    await this.updateProgress(40, 'Analyzing content structure...');
                    
                    // Real content analysis
                    const contentAnalysis = await this.analyzeRealContent(url);
                    results.analysis.content = contentAnalysis;

                    await this.updateProgress(60, 'Parsing DOM elements...');
                    
                    // Real DOM analysis
                    const domAnalysis = await this.analyzeRealDOM(contentAnalysis.html);
                    results.analysis.dom = domAnalysis;

                    await this.updateProgress(80, 'Checking HTTP response...');
                    
                    // Real HTTP analysis
                    const httpAnalysis = await this.analyzeRealHTTP(url);
                    results.analysis.http = httpAnalysis;

                    await this.updateProgress(100, 'Analysis completed!');

                } catch (error) {
                    console.error('Analysis error:', error);
                    results.error = error.message;
                    results.errorDetails = error.stack;
                }

                this.results = results;
                this.isScanning = false;
                return results;
            }

            async measureRealLoadTime(url) {
                const startTime = performance.now();
                
                try {
                    // Multiple timing methods for accuracy
                    const fetchStart = performance.now();
                    const response = await fetch(url, { 
                        method: 'HEAD',
                        mode: 'no-cors'
                    });
                    const fetchEnd = performance.now();
                    const fetchTime = Math.round(fetchEnd - fetchStart);

                    // Image loading timing
                    const imgStart = performance.now();
                    const imgPromise = new Promise((resolve, reject) => {
                        const img = new Image();
                        img.onload = () => resolve(performance.now() - imgStart);
                        img.onerror = () => resolve(performance.now() - imgStart);
                        img.src = url + '/favicon.ico?' + Date.now();
                    });
                    const imgTime = await imgPromise;

                    return {
                        fetchTime: fetchTime,
                        imageTime: Math.round(imgTime),
                        averageTime: Math.round((fetchTime + imgTime) / 2),
                        timestamp: new Date().toISOString(),
                        method: 'Browser Performance APIs'
                    };

                } catch (error) {
                    const endTime = performance.now();
                    return {
                        error: error.message,
                        totalTime: Math.round(endTime - startTime),
                        method: 'Error recovery timing'
                    };
                }
            }

            async analyzeRealContent(url) {
                try {
                    const corsProxy = 'https://api.allorigins.win/get?url=';
                    const response = await fetch(corsProxy + encodeURIComponent(url));
                    const data = await response.json();
                    
                    if (data.contents) {
                        const contentSize = new Blob([data.contents]).size;
                        
                        return {
                            html: data.contents,
                            size: contentSize,
                            sizeFormatted: this.formatBytes(contentSize),
                            url: data.status.url || url,
                            httpStatus: data.status.http_code || 'Unknown',
                            contentType: data.status.content_type || 'Unknown',
                            method: 'CORS proxy fetch'
                        };
                    } else {
                        throw new Error('No content received');
                    }

                } catch (error) {
                    return {
                        error: error.message,
                        url: url,
                        method: 'Fallback analysis',
                        note: 'Content could not be fetched due to CORS restrictions'
                    };
                }
            }

            async analyzeRealDOM(html) {
                if (!html) {
                    return { error: 'No HTML content to analyze' };
                }

                try {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');

                    // Count elements
                    const elementCounts = {
                        totalElements: doc.querySelectorAll('*').length,
                        divs: doc.querySelectorAll('div').length,
                        images: doc.querySelectorAll('img').length,
                        links: doc.querySelectorAll('a').length,
                        scripts: doc.querySelectorAll('script').length,
                        stylesheets: doc.querySelectorAll('link[rel="stylesheet"]').length,
                        forms: doc.querySelectorAll('form').length,
                        inputs: doc.querySelectorAll('input').length,
                        headings: {
                            h1: doc.querySelectorAll('h1').length,
                            h2: doc.querySelectorAll('h2').length,
                            h3: doc.querySelectorAll('h3').length,
                            h4: doc.querySelectorAll('h4').length,
                            h5: doc.querySelectorAll('h5').length,
                            h6: doc.querySelectorAll('h6').length
                        }
                    };

                    // Extract meta data
                    const metaData = {
                        title: doc.querySelector('title')?.textContent?.trim() || 'No title',
                        description: doc.querySelector('meta[name="description"]')?.getAttribute('content') || 'No description',
                        keywords: doc.querySelector('meta[name="keywords"]')?.getAttribute('content') || 'No keywords',
                        viewport: doc.querySelector('meta[name="viewport"]')?.getAttribute('content') || 'No viewport meta',
                        ogTitle: doc.querySelector('meta[property="og:title"]')?.getAttribute('content') || 'No OG title',
                        ogDescription: doc.querySelector('meta[property="og:description"]')?.getAttribute('content') || 'No OG description',
                        charset: doc.querySelector('meta[charset]')?.getAttribute('charset') || 'Unknown'
                    };

                    // Accessibility checks
                    const accessibilityIssues = [];
                    
                    const imgsWithoutAlt = doc.querySelectorAll('img:not([alt])');
                    if (imgsWithoutAlt.length > 0) {
                        accessibilityIssues.push(`${imgsWithoutAlt.length} images missing alt text`);
                    }

                    const inputsWithoutLabels = Array.from(doc.querySelectorAll('input[type="text"], input[type="email"], input[type="password"]'))
                        .filter(input => !input.id || !doc.querySelector(`label[for="${input.id}"]`));
                    if (inputsWithoutLabels.length > 0) {
                        accessibilityIssues.push(`${inputsWithoutLabels.length} form inputs without labels`);
                    }

                    return {
                        elementCounts,
                        metaData,
                        accessibilityIssues,
                        method: 'DOM parser analysis'
                    };

                } catch (error) {
                    return {
                        error: error.message,
                        method: 'DOM parsing failed'
                    };
                }
            }

            async analyzeRealHTTP(url) {
                try {
                    const startTime = performance.now();
                    const response = await fetch(url, { method: 'HEAD', mode: 'no-cors' });
                    const endTime = performance.now();

                    const httpData = {
                        responseTime: Math.round(endTime - startTime),
                        url: response.url || url,
                        redirected: response.redirected,
                        type: response.type,
                        ok: response.ok,
                        status: response.status || 'Unknown (CORS)',
                        statusText: response.statusText || 'Unknown (CORS)',
                        method: 'Fetch API',
                        timestamp: new Date().toISOString()
                    };

                    httpData.protocol = url.startsWith('https://') ? 'HTTPS' : 'HTTP';
                    httpData.isSecure = url.startsWith('https://');
                    httpData.domain = new URL(url).hostname;
                    httpData.port = new URL(url).port || (httpData.isSecure ? 443 : 80);

                    return httpData;

                } catch (error) {
                    return {
                        error: error.message,
                        method: 'HTTP analysis failed',
                        protocol: url.startsWith('https://') ? 'HTTPS' : 'HTTP',
                        isSecure: url.startsWith('https://'),
                        domain: new URL(url).hostname
                    };
                }
            }

            formatBytes(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            async updateProgress(percent, status) {
                const progressBar = document.getElementById('progressBar');
                const progressPercent = document.getElementById('progressPercent');
                const scanStatus = document.getElementById('scanStatus');
                
                if (progressBar) progressBar.style.width = percent + '%';
                if (progressPercent) progressPercent.textContent = percent + '%';
                if (scanStatus) scanStatus.textContent = status;
                
                await new Promise(resolve => setTimeout(resolve, 300));
            }
        }

        // Analyzer UI
        class VinnesiaAnalyzerUI {
            constructor() {
                this.analyzer = new VinnesiaAnalyzer();
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                document.getElementById('startScan').addEventListener('click', () => {
                    this.startRealScan();
                });

                document.getElementById('targetUrl').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.startRealScan();
                    }
                });

                document.getElementById('targetUrl').addEventListener('input', (e) => {
                    let url = e.target.value.trim();
                    if (url && !url.match(/^https?:\/\//)) {
                        e.target.value = 'https://' + url;
                    }
                });
            }

            async startRealScan() {
                const urlInput = document.getElementById('targetUrl');
                const url = urlInput.value.trim();

                if (!url) {
                    this.showAlert('Please enter a URL to analyze', 'error');
                    urlInput.focus();
                    return;
                }

                if (!this.isValidUrl(url)) {
                    this.showAlert('Please enter a valid URL (e.g., https://example.com)', 'error');
                    urlInput.focus();
                    return;
                }

                // Show progress
                document.getElementById('progressSection').classList.remove('hidden');
                document.getElementById('resultsSection').classList.add('hidden');

                // Disable button
                const startBtn = document.getElementById('startScan');
                startBtn.disabled = true;
                startBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Analyzing...';

                try {
                    const results = await this.analyzer.startScan(url);
                    this.displayRealResults(results, url);
                } catch (error) {
                    this.showAlert('Analysis failed: ' + error.message, 'error');
                    console.error('Scan error:', error);
                } finally {
                    startBtn.disabled = false;
                    startBtn.innerHTML = '<i class="fas fa-play mr-2"></i>Start Analysis';
                    
                    setTimeout(() => {
                        document.getElementById('progressSection').classList.add('hidden');
                    }, 1000);
                }
            }

            displayRealResults(results, url) {
                // Show results section
                document.getElementById('resultsSection').classList.remove('hidden');

                // Set website previews
                document.getElementById('desktopPreview').src = url;
                document.getElementById('mobilePreview').src = url;

                // Display performance metrics
                const perf = results.analysis.performance;
                document.getElementById('realLoadTime').textContent = perf.averageTime ? `${perf.averageTime}ms` : 'Error';
                document.getElementById('realPageSize').textContent = results.analysis.content?.sizeFormatted || 'Unknown';
                document.getElementById('realStatus').textContent = results.analysis.content?.httpStatus || results.analysis.http?.status || 'Unknown';
                document.getElementById('realResources').textContent = results.analysis.dom?.elementCounts?.totalElements || 'Unknown';

                // Display technical results
                this.displayTechnicalResults(results.analysis);

                // Display content results  
                this.displayContentResults(results.analysis);

                // Display detailed results
                this.displayDetailedResults(results);

                this.showAlert('Analysis completed successfully!', 'success');
                
                // Scroll to results
                document.getElementById('resultsSection').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            }

            displayTechnicalResults(analysis) {
                const container = document.getElementById('technicalResults');
                const http = analysis.http || {};
                const perf = analysis.performance || {};

                container.innerHTML = `
                    <div class="space-y-2 md:space-y-3">
                        <div class="flex items-center justify-between p-2 md:p-3 bg-gray-700 rounded-lg">
                            <span class="text-xs md:text-sm text-gray-300">Protocol</span>
                            <span class="text-xs md:text-sm font-semibold ${http.isSecure ? 'text-green-400' : 'text-red-400'}">
                                ${http.protocol || 'Unknown'}
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-2 md:p-3 bg-gray-700 rounded-lg">
                            <span class="text-xs md:text-sm text-gray-300">Domain</span>
                            <span class="text-xs md:text-sm font-semibold text-white mobile-responsive-text">${http.domain || 'Unknown'}</span>
                        </div>
                        <div class="flex items-center justify-between p-2 md:p-3 bg-gray-700 rounded-lg">
                            <span class="text-xs md:text-sm text-gray-300">Response Time</span>
                            <span class="text-xs md:text-sm font-semibold">${http.responseTime || perf.averageTime || 'Unknown'}ms</span>
                        </div>
                        <div class="flex items-center justify-between p-2 md:p-3 bg-gray-700 rounded-lg">
                            <span class="text-xs md:text-sm text-gray-300">Redirected</span>
                            <span class="text-xs md:text-sm font-semibold ${http.redirected ? 'text-yellow-400' : 'text-green-400'}">
                                ${http.redirected ? 'Yes' : 'No'}
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-2 md:p-3 bg-gray-700 rounded-lg">
                            <span class="text-xs md:text-sm text-gray-300">Analysis Method</span>
                            <span class="text-xs text-blue-400">Real Browser APIs</span>
                        </div>
                    </div>

                    ${http.error || perf.error ? `
                        <div class="mt-3 md:mt-4 p-3 md:p-4 bg-yellow-900 bg-opacity-20 border border-yellow-500 rounded-lg">
                            <h4 class="font-semibold text-yellow-400 mb-2 text-xs md:text-sm">Analysis Notes:</h4>
                            <p class="text-xs md:text-sm">${http.error || perf.error}</p>
                            <p class="text-xs text-gray-400 mt-2">Due to browser security, some data may be limited by CORS policy</p>
                        </div>
                    ` : ''}
                `;
            }

            displayContentResults(analysis) {
                const container = document.getElementById('contentResults');
                const content = analysis.content || {};
                const dom = analysis.dom || {};

                if (content.error) {
                    container.innerHTML = `
                        <div class="p-3 md:p-4 bg-red-900 bg-opacity-20 border border-red-500 rounded-lg">
                            <h4 class="font-semibold text-red-400 mb-2 text-xs md:text-sm">Content Analysis Failed</h4>
                            <p class="text-xs md:text-sm">${content.error}</p>
                            <p class="text-xs text-gray-400 mt-2">This is normal due to CORS restrictions. The timing analysis above is still real.</p>
                        </div>
                    `;
                    return;
                }

                const metaData = dom.metaData || {};
                const elementCounts = dom.elementCounts || {};

                container.innerHTML = `
                    <div class="space-y-2 md:space-y-3">
                        <div class="p-2 md:p-3 bg-gray-700 rounded-lg">
                            <div class="text-xs md:text-sm text-gray-300 mb-1">Page Title</div>
                            <div class="text-xs md:text-sm text-white mobile-responsive-text">${metaData.title || 'Not available'}</div>
                        </div>
                        <div class="p-2 md:p-3 bg-gray-700 rounded-lg">
                            <div class="text-xs md:text-sm text-gray-300 mb-1">Meta Description</div>
                            <div class="text-xs md:text-sm text-white mobile-responsive-text">${metaData.description ? metaData.description.substring(0, 80) + (metaData.description.length > 80 ? '...' : '') : 'Not available'}</div>
                        </div>
                        <div class="grid grid-cols-2 gap-2 md:gap-3">
                            <div class="p-2 md:p-3 bg-gray-700 rounded-lg text-center">
                                <div class="text-sm md:text-lg font-bold text-blue-400">${elementCounts.images || 0}</div>
                                <div class="text-xs text-gray-300">Images</div>
                            </div>
                            <div class="p-2 md:p-3 bg-gray-700 rounded-lg text-center">
                                <div class="text-sm md:text-lg font-bold text-green-400">${elementCounts.links || 0}</div>
                                <div class="text-xs text-gray-300">Links</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-2 md:gap-3">
                            <div class="p-2 md:p-3 bg-gray-700 rounded-lg text-center">
                                <div class="text-sm md:text-lg font-bold text-purple-400">${elementCounts.scripts || 0}</div>
                                <div class="text-xs text-gray-300">Scripts</div>
                            </div>
                            <div class="p-2 md:p-3 bg-gray-700 rounded-lg text-center">
                                <div class="text-sm md:text-lg font-bold text-yellow-400">${elementCounts.totalElements || 0}</div>
                                <div class="text-xs text-gray-300">Total Elements</div>
                            </div>
                        </div>
                    </div>

                    ${dom.accessibilityIssues && dom.accessibilityIssues.length > 0 ? `
                        <div class="mt-3 md:mt-4 p-3 md:p-4 bg-orange-900 bg-opacity-20 border border-orange-500 rounded-lg">
                            <h4 class="font-semibold text-orange-400 mb-2 text-xs md:text-sm">Accessibility Issues Found:</h4>
                            <ul class="text-xs md:text-sm space-y-1">
                                ${dom.accessibilityIssues.map(issue => `<li>• ${issue}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                `;
            }

            displayDetailedResults(results) {
                const container = document.getElementById('detailedResults');
                const timestamp = new Date(results.timestamp).toLocaleString();

                container.innerHTML = `
                    <div class="bg-gray-700 rounded-lg p-4 md:p-6">
                        <h4 class="font-semibold text-white mb-3 md:mb-4 flex items-center text-sm md:text-base">
                            <i class="fas fa-info-circle mr-2 text-blue-400"></i>
                            Analysis Summary
                        </h4>
                        
                        <div class="mobile-grid md:grid-cols-2 gap-4 md:gap-6">
                            <div>
                                <h5 class="font-semibold text-purple-400 mb-2 md:mb-3 text-sm">Analysis Details</h5>
                                <div class="space-y-2 text-xs md:text-sm">
                                    <div class="flex justify-between items-start">
                                        <span class="text-gray-300">Target URL:</span>
                                        <span class="text-white text-right mobile-responsive-text max-w-[60%]">${results.url}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Analysis Time:</span>
                                        <span class="text-white text-right text-xs">${timestamp}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Data Source:</span>
                                        <span class="text-green-400 text-xs">100% Real</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Method:</span>
                                        <span class="text-white text-xs">Browser APIs</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h5 class="font-semibold text-purple-400 mb-2 md:mb-3 text-sm">Analysis Capabilities</h5>
                                <div class="space-y-1 md:space-y-2 text-xs md:text-sm">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-green-400 text-xs"></i>
                                        <span>Real HTTP response timing</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-green-400 text-xs"></i>
                                        <span>Actual DOM element counting</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-green-400 text-xs"></i>
                                        <span>Real meta data extraction</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-green-400 text-xs"></i>
                                        <span>Accessibility checking</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-green-400 text-xs"></i>
                                        <span>Live website preview</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 md:mt-6 p-3 md:p-4 bg-blue-900 bg-opacity-20 border border-blue-500 rounded-lg">
                            <h5 class="font-semibold text-blue-400 mb-2 text-xs md:text-sm">Important Note:</h5>
                            <p class="text-xs md:text-sm text-gray-300">
                                This analyzer performs 100% real analysis using browser APIs. However, due to browser security policies (CORS), 
                                some detailed information may be limited for external websites. The timing measurements and basic checks are completely accurate.
                            </p>
                        </div>

                        ${results.error ? `
                            <div class="mt-3 md:mt-4 p-3 md:p-4 bg-red-900 bg-opacity-20 border border-red-500 rounded-lg">
                                <h5 class="font-semibold text-red-400 mb-2 text-xs md:text-sm">Analysis Error:</h5>
                                <p class="text-xs md:text-sm text-gray-300">${results.error}</p>
                            </div>
                        ` : ''}
                    </div>

                    <!-- Export Data Section -->
                    <div class="bg-gray-700 rounded-lg p-4 md:p-6 mt-4 md:mt-6">
                        <h4 class="font-semibold text-white mb-3 md:mb-4 flex items-center text-sm md:text-base">
                            <i class="fas fa-download mr-2 text-green-400"></i>
                            Export Analysis Data
                        </h4>
                        <div class="grid grid-cols-1 md:flex md:flex-wrap gap-2 md:gap-3">
                            <button onclick="exportRealData('json')" class="bg-blue-600 hover:bg-blue-700 px-3 md:px-4 py-2 rounded-lg text-xs md:text-sm transition-colors">
                                <i class="fas fa-file-code mr-2"></i>Export JSON
                            </button>
                            <button onclick="exportRealData('txt')" class="bg-green-600 hover:bg-green-700 px-3 md:px-4 py-2 rounded-lg text-xs md:text-sm transition-colors">
                                <i class="fas fa-file-alt mr-2"></i>Export TXT
                            </button>
                            <button onclick="copyToClipboard()" class="bg-purple-600 hover:bg-purple-700 px-3 md:px-4 py-2 rounded-lg text-xs md:text-sm transition-colors">
                                <i class="fas fa-copy mr-2"></i>Copy Results
                            </button>
                        </div>
                    </div>
                `;
            }

            isValidUrl(string) {
                try {
                    new URL(string);
                    return true;
                } catch (_) {
                    return false;
                }
            }

            showAlert(message, type = 'info') {
                const alertColors = {
                    error: 'bg-red-600 border-red-500',
                    success: 'bg-green-600 border-green-500',
                    info: 'bg-blue-600 border-blue-500'
                };

                const alert = document.createElement('div');
                alert.className = `fixed top-4 right-4 z-50 ${alertColors[type]} border-l-4 p-3 md:p-4 rounded shadow-lg text-white max-w-xs md:max-w-sm`;
                alert.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i class="fas ${type === 'error' ? 'fa-exclamation-circle' : type === 'success' ? 'fa-check-circle' : 'fa-info-circle'} text-sm"></i>
                            <span class="text-xs md:text-sm">${message}</span>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white hover:text-gray-300 focus:outline-none">
                            <i class="fas fa-times text-sm"></i>
                        </button>
                    </div>
                `;

                document.body.appendChild(alert);

                setTimeout(() => {
                    if (alert.parentNode) {
                        alert.remove();
                    }
                }, 5000);
            }
        }

        // Export Functions
        function exportRealData(format) {
            const analyzer = window.vinnesiaAnalyzerUI.analyzer;
            if (!analyzer.results || Object.keys(analyzer.results).length === 0) {
                alert('No analysis results to export. Please run an analysis first.');
                return;
            }

            let exportData;
            let filename;
            let mimeType;

            switch (format) {
                case 'json':
                    exportData = JSON.stringify(analyzer.results, null, 2);
                    filename = `vinnesia-analysis-${Date.now()}.json`;
                    mimeType = 'application/json';
                    break;
                case 'txt':
                    exportData = generateTextReport(analyzer.results);
                    filename = `vinnesia-analysis-${Date.now()}.txt`;
                    mimeType = 'text/plain';
                    break;
                default:
                    alert('Unsupported format');
                    return;
            }

            const blob = new Blob([exportData], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function generateTextReport(results) {
            const analysis = results.analysis || {};
            const timestamp = new Date(results.timestamp).toLocaleString();
            
            return `
VINNESIA ANALYZER - WEBSITE ANALYSIS REPORT
==========================================

Target URL: ${results.url}
Analysis Time: ${timestamp}
Data Source: 100% Real - Professional Analysis

PERFORMANCE METRICS
-------------------
${analysis.performance ? `
Average Response Time: ${analysis.performance.averageTime || 'N/A'}ms
Fetch Time: ${analysis.performance.fetchTime || 'N/A'}ms
Image Load Time: ${analysis.performance.imageTime || 'N/A'}ms
` : 'Performance data not available'}

CONTENT ANALYSIS
----------------
${analysis.content ? `
Page Size: ${analysis.content.sizeFormatted || 'N/A'}
HTTP Status: ${analysis.content.httpStatus || 'N/A'}
Content Type: ${analysis.content.contentType || 'N/A'}
` : 'Content data not available'}

DOM STRUCTURE
-------------
${analysis.dom && analysis.dom.elementCounts ? `
Total Elements: ${analysis.dom.elementCounts.totalElements}
Images: ${analysis.dom.elementCounts.images}
Links: ${analysis.dom.elementCounts.links}
Scripts: ${analysis.dom.elementCounts.scripts}
Forms: ${analysis.dom.elementCounts.forms}
Headings (H1-H6): ${Object.values(analysis.dom.elementCounts.headings || {}).reduce((a, b) => a + b, 0)}
` : 'DOM data not available'}

SEO ANALYSIS
------------
${analysis.dom && analysis.dom.metaData ? `
Page Title: ${analysis.dom.metaData.title}
Meta Description: ${analysis.dom.metaData.description}
Meta Keywords: ${analysis.dom.metaData.keywords}
Viewport Meta: ${analysis.dom.metaData.viewport}
Open Graph Title: ${analysis.dom.metaData.ogTitle}
Open Graph Description: ${analysis.dom.metaData.ogDescription}
Character Set: ${analysis.dom.metaData.charset}
` : 'SEO data not available'}

ACCESSIBILITY ANALYSIS
----------------------
${analysis.dom && analysis.dom.accessibilityIssues ? 
analysis.dom.accessibilityIssues.length > 0 ? 
analysis.dom.accessibilityIssues.map(issue => `• ${issue}`).join('\n') : 
'No major accessibility issues found' :
'Accessibility analysis not available'}

TECHNICAL DETAILS
-----------------
${analysis.http ? `
Protocol: ${analysis.http.protocol}
Domain: ${analysis.http.domain}
Secure Connection: ${analysis.http.isSecure ? 'Yes (HTTPS)' : 'No (HTTP)'}
Response Time: ${analysis.http.responseTime}ms
Redirected: ${analysis.http.redirected ? 'Yes' : 'No'}
Status: ${analysis.http.status}
` : 'HTTP analysis not available'}

ANALYSIS NOTES
--------------
This analysis uses real browser APIs and measurements for accurate results.
Some data may be limited due to browser security policies (CORS).
All timing measurements are genuine and reflect real-world performance.

Generated by Vinnesia Analyzer - Professional Website Analysis Tool
Website: https://analyzer.vinnesia.my.id
            `.trim();
        }

        function copyToClipboard() {
            const analyzer = window.vinnesiaAnalyzerUI.analyzer;
            if (!analyzer.results) {
                alert('No results to copy');
                return;
            }

            const textReport = generateTextReport(analyzer.results);
            if (navigator.clipboard) {
                navigator.clipboard.writeText(textReport).then(() => {
                    alert('Results copied to clipboard!');
                }).catch(() => {
                    fallbackCopyToClipboard(textReport);
                });
            } else {
                fallbackCopyToClipboard(textReport);
            }
        }

        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('Results copied to clipboard!');
            } catch (err) {
                alert('Failed to copy to clipboard. Please try again.');
            }
            
            document.body.removeChild(textArea);
        }

        // Quick scan function for testing
        window.quickScan = (url = 'https://google.com') => {
            document.getElementById('targetUrl').value = url;
            window.vinnesiaAnalyzerUI.startRealScan();
        };

        // Initialize Vinnesia Analyzer
        document.addEventListener('DOMContentLoaded', () => {
            window.vinnesiaAnalyzerUI = new VinnesiaAnalyzerUI();
            
            console.log('🚀 Vinnesia Analyzer - Professional Website Analysis Tool');
            console.log('✅ Real-time analysis with comprehensive insights');
            console.log('📊 Performance, SEO, Accessibility, and Technical Analysis');
            console.log('🔧 Test Commands: quickScan("https://example.com")');

            // Performance optimization
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(() => {
                    // Service worker registration failed, but that's okay
                });
            }

            // Preload favicon for better performance
            const favicon = document.createElement('link');
            favicon.rel = 'prefetch';
            favicon.href = 'favicon.ico';
            document.head.appendChild(favicon);
        });

        // Handle page visibility changes for better performance
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // Page is hidden, pause any ongoing operations if needed
            } else {
                // Page is visible again, resume operations if needed
            }
        });
    </script>
</body>
</html>
